#!/bin/bash

echo "Running pre-commit checks..."

# Aller dans le dossier backend
cd ../../backend

# Compilation
echo "Compiling contracts..."
npx hardhat compile
if [ $? -ne 0 ]; then
  echo "❌ Compilation failed"
  exit 1
fi

# Linting
echo "Linting Solidity files..."
npx solhint 'contracts/**/*.sol'
if [ $? -ne 0 ]; then
  echo "❌ Solhint found issues"
  exit 1
fi

# Tests
echo "Running tests..."
npx hardhat test
if [ $? -ne 0 ]; then
  echo "❌ Tests failed"
  exit 1
fi

echo "✅ All checks passed!"
exit 0
EOF
